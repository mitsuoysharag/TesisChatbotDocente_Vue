(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca33d298"],{"0dcf":function(t,a,o){"use strict";o.r(a);var s=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("v-content",[o("Cabecera"),"cursos"==t.mostrar?o("v-container",[t.loading_cursos?o("div",{staticClass:"loading-cursos text-center"},[o("h3",{staticClass:"mb-5"},[t._v("Cargando Cursos")]),o("v-progress-circular",{attrs:{size:50,color:"#1976d2",indeterminate:""}})],1):t._l(t.cursos,function(a,s){return o("div",{key:s,staticClass:"my-6 elevation-2",staticStyle:{background:"#fff"}},[o("div",{staticClass:"d-flex px-6 py-4"},[o("span",{staticClass:"curso-nombre"},[t._v(t._s(a.nombre))]),o("div",{staticClass:"flex-grow-1"}),"profesor"==t.sesion["tipo"]?o("v-btn",{staticClass:"mr-3",attrs:{rounded:"",color:"success",dark:"",loading:t.loading_alumnos},on:{click:function(o){return t.verAlumnos(a.curso_id)}}},[t._v("\n          Matriculados\n          "),o("v-icon",{staticClass:"ml-3"},[t._v("mdi-account-group")])],1):t._e(),o("v-btn",{attrs:{loading:a["loading_posiciones"],rounded:"",color:"warning",dark:""},on:{click:function(o){return t.verScoreboard(a)}}},[t._v("\n          Posiciones\n          "),o("v-icon",{staticClass:"ml-3"},[t._v("mdi-trophy")])],1)],1),o("v-divider"),o("div",{staticClass:"px-4 py-3"},[t._l(a.temas,function(a,s){return o("v-btn",{key:s,staticClass:"ma-1",attrs:{rounded:"",color:"primary",dark:""},on:{click:function(o){return t.ingresarCreacion(a.tema_id)}}},[t._v(t._s(a.nombre))])}),"profesor"==t.sesion.tipo?o("v-btn",{staticClass:"ma-1",attrs:{rounded:"",outlined:"",color:"grey"}},[o("v-icon",[t._v("mdi-plus")])],1):t._e()],2)],1)})],2):"alumnos"==t.mostrar?o("v-container",[o("div",{staticClass:"elevation-6"},[o("v-toolbar",{attrs:{flat:""}},[o("v-btn",{attrs:{icon:""},on:{click:function(a){t.mostrar="cursos"}}},[o("v-icon",[t._v("mdi-arrow-left")])],1),o("h3",{staticClass:"ml-2"},[t._v("Alumnos")]),o("div",{staticClass:"flex-grow-1"}),o("div",{staticClass:"text-center"},[o("v-dialog",{attrs:{width:"600"},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[o("v-btn",t._g({attrs:{rounded:"",color:"success",dark:""}},s),[t._v("\n                Agregar Alumno\n                "),o("v-icon",{staticClass:"ml-3"},[t._v("mdi-account-plus")])],1)]}}]),model:{value:t.dialogAgregarAlumno,callback:function(a){t.dialogAgregarAlumno=a},expression:"dialogAgregarAlumno"}},[o("v-card",{staticClass:"buscar-alumno"},[o("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[o("form",{staticStyle:{width:"100%",display:"flex","align-items":"center"},on:{submit:function(a){return a.preventDefault(),t.buscarAlumno()}}},[o("v-text-field",{attrs:{label:"Nombre o Apellido","single-line":"",clearable:""},model:{value:t.alumnoBuscar,callback:function(a){t.alumnoBuscar=a},expression:"alumnoBuscar"}}),o("v-btn",{staticClass:"ml-4",attrs:{fab:"",text:"",small:""},on:{click:function(a){return t.buscarAlumno()}}},[o("v-icon",[t._v("mdi-magnify")])],1)],1)]),o("div",{staticClass:"contenedor-encontrados"},[t.alumnos_encontrados.length>0?o("v-card-text",{staticClass:"py-1"},t._l(t.alumnos_encontrados,function(a,s){return o("v-card",{key:s,staticClass:"d-flex justify-space-between align-center my-3"},[o("div",{staticClass:"pa-4"},[t._v("\n                      "+t._s(a.nombre)+"\n                      "+t._s(a.apellido_paterno)+"\n                      "+t._s(a.apellido_materno)+"\n                    ")]),o("v-btn",{staticClass:"mr-4",attrs:{loading:t.agregando,color:"success",text:"",icon:"",small:""},on:{click:function(o){t.dialog_matricular=!0,t.alumno_seleccionado=a}}},[o("v-icon",[t._v("mdi-plus")])],1)],1)}),1):o("v-card-text",{staticClass:"text-center pt-5"},[t._v("No hay alumnos encontrados.")])],1)],1)],1)],1)],1),o("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[t._v("Código")]),o("th",{staticClass:"text-left"},[t._v("Nombre")]),o("th",{staticClass:"text-left"},[t._v("Apellido Materno")]),o("th",{staticClass:"text-left"},[t._v("Apellido Paterno")]),o("th",{staticClass:"text-left"})])]),o("tbody",t._l(t.alumnos,function(a,s){return o("tr",{key:s},[o("td",[t._v(t._s(a.usuario))]),o("td",[t._v(t._s(a.nombre))]),o("td",[t._v(t._s(a.apellido_paterno))]),o("td",[t._v(t._s(a.apellido_materno))]),o("td",[o("v-btn",{staticClass:"mx-2",attrs:{fab:"",text:"",dark:"",small:"",color:"error"},on:{click:function(o){t.alumno_seleccionado=a,t.dialog_desmatricular=!0}}},[o("v-icon",{attrs:{dark:""}},[t._v("mdi-delete")])],1)],1)])}),0)]},proxy:!0}])})],1)]):"posiciones"==t.mostrar?o("v-container",[o("div",{staticClass:"elevation-6",staticStyle:{background:"#fff"}},[o("v-toolbar",{attrs:{flat:""}},[o("v-btn",{attrs:{icon:""},on:{click:function(a){t.mostrar="cursos"}}},[o("v-icon",[t._v("mdi-arrow-left")])],1),o("h3",{staticClass:"ml-2"},[t._v("Posiciones")])],1),o("div",{staticClass:"contenedor-posiciones"},[o("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[t._v("Alumno")]),o("th",{staticClass:"text-left"},[t._v("Puntaje")]),o("th",{staticClass:"text-left"},[t._v("Gráficos")])])]),o("tbody",t._l(t.alumnos,function(a,s){return o("tr",{key:s},[o("td",[o("span",[t._v(t._s(s+1)+".")]),t._v("\n                  "+t._s(a["nombre"]+" "+a["apellido_paterno"]+" "+a["apellido_materno"])+"\n                ")]),o("td",[t._v(t._s(a["puntaje_total"]))]),o("td",{staticClass:"py-1"},[o("v-btn",{staticClass:"mx-1 my-1",attrs:{fab:"","x-small":"",color:"primary"},on:{click:function(o){return t.verDashboardEvaluacion(a["evaluaciones"])}}},[o("v-icon",{attrs:{dark:""}},[t._v("mdi-format-list-checks")])],1),o("v-btn",{staticClass:"mx-1 my-1",attrs:{loading:a["loading_dashboard_tiempo"],fab:"","x-small":"",color:"success"},on:{click:function(o){return t.verDashboardTiempo(a)}}},[o("v-icon",{attrs:{dark:""}},[t._v("mdi-clock-outline")])],1)],1)])}),0)]},proxy:!0}])})],1)],1)]):t._e(),o("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog_matricular,callback:function(a){t.dialog_matricular=a},expression:"dialog_matricular"}},[o("v-card",[o("v-card",{staticClass:"text-center"},[o("v-card-text",{staticStyle:{"font-size":"16px"}},[t._v("¿Desea agregar al alumno seleccionado?")]),o("v-card-actions",[o("div",{staticClass:"flex-grow-1"}),o("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(a){t.dialog_matricular=!1,t.matricularAlumno()}}},[t._v("Agregar")]),o("v-btn",{attrs:{text:""},on:{click:function(a){t.dialog_matricular=!1}}},[t._v("Cancelar")]),o("div",{staticClass:"flex-grow-1"})],1)],1)],1)],1),o("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog_desmatricular,callback:function(a){t.dialog_desmatricular=a},expression:"dialog_desmatricular"}},[o("v-card",[o("v-card",{staticClass:"text-center"},[o("v-card-text",{staticStyle:{"font-size":"16px"}},[t._v("¿Desea eliminar al alumno seleccionado?")]),o("v-card-actions",[o("div",{staticClass:"flex-grow-1"}),o("v-btn",{attrs:{text:"",color:"error"},on:{click:function(a){t.dialog_desmatricular=!1,t.desmatricularAlumno()}}},[t._v("Eliminar")]),o("v-btn",{attrs:{text:""},on:{click:function(a){t.dialog_desmatricular=!1}}},[t._v("Cancelar")]),o("div",{staticClass:"flex-grow-1"})],1)],1)],1)],1),o("v-dialog",{attrs:{"max-width":"600"},model:{value:t.dialog_dashboard,callback:function(a){t.dialog_dashboard=a},expression:"dialog_dashboard"}},[o("v-card",[o("canvas",{attrs:{id:"myChart",width:"600",height:"400"}})])],1)],1)},e=[],i=o("30ef"),r=o.n(i),n=o("681c");class l{constructor(t,a,o,s,e){this.alumno_id=t,this.usuario=a,this.nombre=o,this.apellido_paterno=s,this.apellido_materno=e,this.evaluaciones=[],this.puntaje_total=0}}class c{constructor(t,a){this.curso_id=t,this.nombre=a,this.temas=[]}}var d={data(){return{sesion:null,alumnoBuscar:"",mostrar:"cursos",alumnos:[],cursos:[],curso_id_seleccionado:null,alumnos_encontrados:[],alumno_seleccionado:null,agregando:!1,myChart:null,dialogAgregarAlumno:!1,dialog_matricular:!1,dialog_desmatricular:!1,dialog_dashboard:!1,loading_cursos:!0,loading_alumnos:!1}},mounted(){this.sesion=this.$store.state.servicio.sesion.obtenerSesion();let t="profesor"==this.sesion.tipo?this.$store.state.servicio.curso.obtenerCursoPorProfesor:this.$store.state.servicio.curso.obtenerCursoPorAlumno;t(this.sesion["id"],t=>{this.loading_cursos=!1;let a=JSON.parse(t);a.forEach(t=>{let a=new c(t._id.$oid,t.nombre);a["loading_posiciones"]=!1,this.cursos.push(a),this.$store.state.servicio.tema.obtenerTemaPorCurso(a.curso_id,t=>{let o=JSON.parse(t);o.forEach(t=>{a.temas.push(new u(t._id.$oid,t.nombre))})},t=>{console.log(t)})})},t=>{this.loading_cursos=!1,console.log(t)})},methods:{buscarAlumno(){this.alumnoBuscar&&this.$store.state.servicio.alumno.obtenerAlumnoPorNombre(this.alumnoBuscar,t=>{this.alumnos_encontrados=[],JSON.parse(t).forEach(t=>{let a=!0;this.alumnos.forEach(o=>{t._id.$oid==o.alumno_id&&(a=!1)}),a&&this.alumnos_encontrados.push(new l(t._id.$oid,t["codigo"],t["nombre"],t["apellido_paterno"],t["apellido_materno"]))})},t=>{console.log(t)})},verScoreboard(t){let a=t["curso_id"];t["loading_posiciones"]=!0,this.alumnos=[];let o=[],s=[];this.$store.state.servicio.alumno.obtenerAlumnosPorCurso(a,e=>{e.alumnos.forEach(t=>{o.push(new Promise((o,e)=>{this.$store.state.servicio.alumno.obtenerAlumnoPorId(t,t=>{let i=new l(t["alumno_id"],t["codigo"],t["nombre"],t["apellido_paterno"],t["apellido_materno"]);i["loading_dashboard_tiempo"]=!1,s.push(i),this.$store.state.servicio.evaluacion.puntajeTotalAlumnoPorCurso(i["alumno_id"],a,t=>{i["evaluaciones"]=t,i["puntaje_total"]=t.map(t=>t["puntajeTotal"]).reduce(function(t,a){return t+a},0),o()},t=>{console.log(t),e()})},t=>{console.log(t),e()})}))}),Promise.all(o).then(a=>{t["loading_posiciones"]=!1,this.mostrar="posiciones",this.ordenarPosiciones(s)})},t=>{console.log(t)})},ordenarPosiciones(t){t.sort(function(t,a){return a["puntaje_total"]-t["puntaje_total"]}),this.alumnos=t},verAlumnos(t){this.curso_id_seleccionado=t,this.loading_alumnos=!0,this.$store.state.servicio.alumno.obtenerAlumnosPorCurso(t,t=>{this.loading_alumnos=!1,this.mostrar="alumnos",this.alumnos=[],t.alumnos.forEach(t=>{this.$store.state.servicio.alumno.obtenerAlumnoPorId(t,t=>{let a=new l(t["alumno_id"],t["codigo"],t["nombre"],t["apellido_paterno"],t["apellido_materno"]);this.alumnos.push(a)},t=>{console.log(t)})})},t=>{console.log(t)})},ingresarCreacion(t){"profesor"==this.sesion.tipo?this.$router.push({name:"creacion",params:{tema_id:t}}):this.$router.push({name:"chatbot",params:{tema_id:t}})},matricularAlumno(){let t=JSON.parse(JSON.stringify(this.alumno_seleccionado));this.$store.state.servicio.matricula.matricularAlumno(t.alumno_id,this.curso_id_seleccionado,a=>{this.alumnos_encontrados.forEach((a,o)=>{a.alumno_id==t.alumno_id&&this.alumnos_encontrados.splice(o,1)}),this.alumnos.push(t)},t=>{console.log(t)})},desmatricularAlumno(){let t=this.alumno_seleccionado.alumno_id;this.$store.state.servicio.matricula.desmatricularAlumno(t,this.curso_id_seleccionado,a=>{this.alumnos.forEach((a,o)=>{a.alumno_id==t&&this.alumnos.splice(o,1)})},t=>{console.log(t)})},verDashboardTiempo(t){t["loading_dashboard_tiempo"]=!0,this.$store.state.servicio.tiempo.tiempoTotalAlumnoPorDia(t["alumno_id"],a=>{t["loading_dashboard_tiempo"]=!1;let o=a;o.forEach(t=>{t["tiempoTotal"]=Math.round(t["tiempoTotal"]/6e4)}),this.verDashboard(o,"fecha","tiempoTotal","Tiempo(min) ingresado de los últimos 5 días.","#4caf50")})},verDashboardEvaluacion(t){this.verDashboard(t,"fecha","puntajeTotal","Evaluación de los últimos 5 días.","#1976d2")},verDashboard(t,a,o,s,e){this.myChart&&this.myChart.destroy(),this.dialog_dashboard=!0,setTimeout(()=>{var i=document.getElementById("myChart").getContext("2d");this.myChart=new r.a(i,{type:"line",data:{labels:t.map(t=>t[a]),datasets:[{label:s,data:t.map(t=>t[o]),backgroundColor:[e+"50"],borderColor:[e],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]}}})},200)}},components:{Cabecera:n["a"]}};class u{constructor(t,a){this.tema_id=t,this.nombre=a}}var m=d,v=(o("c1f2"),o("2877")),_=o("6544"),h=o.n(_),p=o("8336"),g=o("b0af"),f=o("99d9"),b=o("a523"),C=o("a75b"),x=o("169a"),y=o("ce7e"),k=o("132d"),A=o("490a"),w=o("1f4f"),$=o("8654"),P=o("71d9"),S=Object(v["a"])(m,s,e,!1,null,"27077cc8",null);a["default"]=S.exports;h()(S,{VBtn:p["a"],VCard:g["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VContainer:b["a"],VContent:C["a"],VDialog:x["a"],VDivider:y["a"],VIcon:k["a"],VProgressCircular:A["a"],VSimpleTable:w["a"],VTextField:$["a"],VToolbar:P["a"]})},"1f4f":function(t,a,o){"use strict";o("8b37");var s=o("80d2"),e=o("7560"),i=o("58df");a["a"]=Object(i["a"])(e["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes(){return{"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,...this.themeClasses}}},methods:{genWrapper(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(s["e"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"8b37":function(t,a,o){},c1f2:function(t,a,o){"use strict";var s=o("ec48"),e=o.n(s);e.a},ec48:function(t,a,o){}}]);
//# sourceMappingURL=chunk-ca33d298.8390aa30.js.map